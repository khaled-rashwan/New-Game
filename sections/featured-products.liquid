{% comment %}
  Featured Products Section
  Add this file to: sections/featured-products.liquid
{% endcomment %}

<style>
  .featured-products-section {
    padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px;
    background-color: {{ section.settings.background_color }};
  }

  .featured-products-container {
    max-width: {{ section.settings.container_width }}px;
    margin: 0 auto;
    padding: 0 20px;
  }

  .featured-products-header {
    text-align: center;
    margin-bottom: 48px;
  }

  .featured-products-title {
    font-size: {{ section.settings.title_size }}px;
    font-weight: 700;
    color: {{ section.settings.title_color }};
    margin: 0 0 16px 0;
    line-height: 1.2;
  }

  .featured-products-description {
    font-size: {{ section.settings.description_size }}px;
    color: {{ section.settings.description_color }};
    max-width: 700px;
    margin: 0 auto;
    line-height: 1.6;
  }

  .featured-products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 24px;
    margin-bottom: 40px;
  }

  @media (min-width: 768px) {
    .featured-products-grid {
      grid-template-columns: repeat({{ section.settings.products_per_row }}, 1fr);
    }
  }

  .product-card {
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    display: flex;
    flex-direction: column;
  }

  .product-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.12);
  }

  .product-image-wrapper {
    position: relative;
    background: #f5f5f5;
    padding-top: 100%;
    overflow: hidden;
  }

  .product-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .product-badges {
    position: absolute;
    top: 12px;
    left: 12px;
    display: flex;
    gap: 8px;
    z-index: 2;
  }

  .product-badge {
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
  }

  .badge-sale {
    background: #ef4444;
    color: white;
  }

  .badge-new {
    background: #10b981;
    color: white;
  }

  .badge-custom {
    background: {{ section.settings.custom_badge_bg }};
    color: {{ section.settings.custom_badge_text }};
  }

  .product-wishlist {
    position: absolute;
    top: 12px;
    right: 12px;
    width: 36px;
    height: 36px;
    background: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.2s ease;
    z-index: 2;
  }

  .product-wishlist:hover {
    transform: scale(1.1);
  }

  .product-wishlist svg {
    width: 20px;
    height: 20px;
    stroke: #333;
    fill: none;
  }

  .product-content {
    padding: 20px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }

  .product-category {
    display: inline-block;
    font-size: 12px;
    font-weight: 500;
    color: #666;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
  }

  .product-rating {
    display: flex;
    align-items: center;
    gap: 4px;
    float: right;
    font-size: 14px;
    font-weight: 600;
  }

  .product-rating svg {
    width: 16px;
    height: 16px;
    fill: #fbbf24;
  }

  .product-title {
    font-size: 20px;
    font-weight: 600;
    color: #1f2937;
    margin: 8px 0 12px 0;
    line-height: 1.3;
  }

  .product-title a {
    color: inherit;
    text-decoration: none;
  }

  .product-title a:hover {
    color: #4f46e5;
  }

  .product-meta {
    display: flex;
    gap: 16px;
    margin-bottom: 16px;
    font-size: 14px;
    color: #6b7280;
  }

  .product-meta-item {
    display: flex;
    align-items: center;
    gap: 4px;
  }

  .product-meta-item svg {
    width: 16px;
    height: 16px;
  }

  .product-price-wrapper {
    margin-bottom: 16px;
    margin-top: auto;
  }

  .product-price {
    font-size: 28px;
    font-weight: 700;
    color: #ff6b35;
  }

  .product-compare-price {
    font-size: 16px;
    color: #9ca3af;
    text-decoration: line-through;
    margin-left: 8px;
  }

  .product-add-to-cart {
    width: 100%;
    padding: 14px 24px;
    background: #1f2937;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.3s ease;
  }

  .product-add-to-cart:hover {
    background: #111827;
  }

  .product-add-to-cart:disabled {
    background: #d1d5db;
    cursor: not-allowed;
  }

  .view-all-button {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 14px 32px;
    background: white;
    color: #1f2937;
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s ease;
    margin: 0 auto;
    display: flex;
    width: fit-content;
  }

  .view-all-button:hover {
    border-color: #1f2937;
    transform: translateX(4px);
  }

  .view-all-button svg {
    width: 20px;
    height: 20px;
  }
</style>

<section class="featured-products-section">
  <div class="featured-products-container">
    
    {% if section.settings.show_header %}
      <div class="featured-products-header">
        {% if section.settings.title != blank %}
          <h2 class="featured-products-title">{{ section.settings.title }}</h2>
        {% endif %}
        {% if section.settings.description != blank %}
          <p class="featured-products-description">{{ section.settings.description }}</p>
        {% endif %}
      </div>
    {% endif %}

    <div class="featured-products-grid">
      {% for block in section.blocks %}
        {% assign product = block.settings.product %}
        {% if product != blank %}
          <div class="product-card" {{ block.shopify_attributes }}>
            
            <div class="product-image-wrapper">
              {% if product.featured_image %}
                <img 
                  class="product-image"
                  src="{{ product.featured_image | image_url: width: 600 }}"
                  alt="{{ product.title | escape }}"
                  loading="lazy"
                >
              {% else %}
                {{ 'product-1' | placeholder_svg_tag: 'product-image' }}
              {% endif %}

              <div class="product-badges">
                {% if block.settings.show_sale_badge and product.compare_at_price > product.price %}
                  <span class="product-badge badge-sale">{{ block.settings.sale_badge_text }}</span>
                {% endif %}
                {% if block.settings.show_new_badge %}
                  <span class="product-badge badge-new">{{ block.settings.new_badge_text }}</span>
                {% endif %}
                {% if block.settings.custom_badge != blank %}
                  <span class="product-badge badge-custom">{{ block.settings.custom_badge }}</span>
                {% endif %}
              </div>

              {% if section.settings.show_wishlist %}
                <div class="product-wishlist">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
                  </svg>
                </div>
              {% endif %}
            </div>

            <div class="product-content">
              
              <div style="overflow: hidden;">
                {% if block.settings.category != blank %}
                  <span class="product-category">{{ block.settings.category }}</span>
                {% endif %}
                {% if block.settings.rating != blank %}
                  <span class="product-rating">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                    {{ block.settings.rating }}
                  </span>
                {% endif %}
              </div>

              <h3 class="product-title">
                <a href="{{ product.url }}">{{ product.title }}</a>
              </h3>

              {% if block.settings.show_meta %}
                <div class="product-meta">
                  {% if block.settings.players != blank %}
                    <span class="product-meta-item">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                      </svg>
                      {{ block.settings.players }}
                    </span>
                  {% endif %}
                  {% if block.settings.duration != blank %}
                    <span class="product-meta-item">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                      {{ block.settings.duration }}
                    </span>
                  {% endif %}
                </div>
              {% endif %}

              <div class="product-price-wrapper">
                <span class="product-price">{{ product.price | money }}</span>
                {% if product.compare_at_price > product.price %}
                  <span class="product-compare-price">{{ product.compare_at_price | money }}</span>
                {% endif %}
              </div>

              <button 
                class="product-add-to-cart"
                {% unless product.available %}disabled{% endunless %}
              >
                {% if product.available %}
                  {{ block.settings.button_text | default: 'Add to Cart' }}
                {% else %}
                  Sold Out
                {% endif %}
              </button>

            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    {% if section.settings.show_view_all and section.settings.view_all_url != blank %}
      <a href="{{ section.settings.view_all_url }}" class="view-all-button">
        {{ section.settings.view_all_text }}
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
        </svg>
      </a>
    {% endif %}

  </div>
</section>

{% schema %}
{
  "name": "Featured Products",
  "tag": "section",
  "class": "section-featured-products",
  "settings": [
    {
      "type": "header",
      "content": "Section Header"
    },
    {
      "type": "checkbox",
      "id": "show_header",
      "label": "Show Section Header",
      "default": true
    },
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Featured Games"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 24,
      "max": 56,
      "step": 2,
      "unit": "px",
      "label": "Title Size",
      "default": 40
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title Color",
      "default": "#1f2937"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Handpicked favorites that bring friends and families together for unforgettable gaming experiences."
    },
    {
      "type": "range",
      "id": "description_size",
      "min": 14,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Description Size",
      "default": 16
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description Color",
      "default": "#6b7280"
    },
    {
      "type": "header",
      "content": "Layout Settings"
    },
    {
      "type": "range",
      "id": "products_per_row",
      "min": 2,
      "max": 5,
      "step": 1,
      "label": "Products Per Row (Desktop)",
      "default": 4
    },
    {
      "type": "range",
      "id": "container_width",
      "min": 1000,
      "max": 1600,
      "step": 50,
      "unit": "px",
      "label": "Container Width",
      "default": 1400
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Padding Top",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 60
    },
    {
      "type": "header",
      "content": "Card Features"
    },
    {
      "type": "checkbox",
      "id": "show_wishlist",
      "label": "Show Wishlist Icon",
      "default": true
    },
    {
      "type": "header",
      "content": "Custom Badge Colors"
    },
    {
      "type": "color",
      "id": "custom_badge_bg",
      "label": "Custom Badge Background",
      "default": "#6366f1"
    },
    {
      "type": "color",
      "id": "custom_badge_text",
      "label": "Custom Badge Text",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "View All Button"
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Show View All Button",
      "default": true
    },
    {
      "type": "text",
      "id": "view_all_text",
      "label": "Button Text",
      "default": "View All Games"
    },
    {
      "type": "url",
      "id": "view_all_url",
      "label": "Button Link"
    }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Product Card",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Select Product"
        },
        {
          "type": "text",
          "id": "category",
          "label": "Category",
          "default": "Strategy",
          "info": "e.g., Strategy, Family, Abstract"
        },
        {
          "type": "text",
          "id": "rating",
          "label": "Rating",
          "default": "4.8",
          "info": "Display rating number (e.g., 4.8)"
        },
        {
          "type": "header",
          "content": "Product Meta"
        },
        {
          "type": "checkbox",
          "id": "show_meta",
          "label": "Show Meta Information",
          "default": true
        },
        {
          "type": "text",
          "id": "players",
          "label": "Players",
          "default": "3-4",
          "info": "e.g., 2-5, 3-4"
        },
        {
          "type": "text",
          "id": "duration",
          "label": "Duration",
          "default": "60-90 min",
          "info": "e.g., 30-60 min"
        },
        {
          "type": "header",
          "content": "Badges"
        },
        {
          "type": "checkbox",
          "id": "show_sale_badge",
          "label": "Show Sale Badge",
          "default": false,
          "info": "Automatically shows if product has compare at price"
        },
        {
          "type": "text",
          "id": "sale_badge_text",
          "label": "Sale Badge Text",
          "default": "Sale"
        },
        {
          "type": "checkbox",
          "id": "show_new_badge",
          "label": "Show New Badge",
          "default": false
        },
        {
          "type": "text",
          "id": "new_badge_text",
          "label": "New Badge Text",
          "default": "New"
        },
        {
          "type": "text",
          "id": "custom_badge",
          "label": "Custom Badge Text",
          "info": "Leave empty to hide"
        },
        {
          "type": "header",
          "content": "Button"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "Add to Cart"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Featured Products",
      "blocks": [
        {
          "type": "product"
        },
        {
          "type": "product"
        },
        {
          "type": "product"
        },
        {
          "type": "product"
        }
      ]
    }
  ]
}
{% endschema %}